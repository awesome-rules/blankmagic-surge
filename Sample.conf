# Sample Surge Configuration

# Line started with "#" or "//" shall be comments.
# ‰ª• "#" Êàñ "//" ÂºÄÂ§¥ÁöÑË°å‰∏∫Ê≥®ÈáäË°å
[General]
# --- GENERAL ---
# Wi-Fi Assist
wifi-assist = false

# Latency Benchmark
internet-test-url = http://bing.com
proxy-test-url = http://www.gstatic.com/generate_204
test-timeout = 5

# TLS Engine
tls-provider = openssl

# GeoIP Database
geoip-maxmind-url = https://github.com/Hackl0us/GeoIP2-CN/raw/release/Country.mmdb
ipv6 = true

# Wi-Fi Access
allow-wifi-access = false
wifi-access-http-port = 6152
wifi-access-socks5-port = 6153

http-listen = 127.0.0.1:6152
socks5-listen = 127.0.0.1:6153

# Remote Controller
external-controller-access = passw0rd@127.0.0.1:6170

# HTTP API
http-api = passw0rd@0.0.0.0:6166

# Compatibility
# > ÂÖºÂÆπÊ®°Âºè
compatibility-mode = False
# > Ë∑≥Ëøá‰ª£ÁêÜ
skip-proxy = 127.0.0.1, 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, 100.64.0.0/10, passenger.t3go.cn, localhost, *.local
# > ÊéíÈô§ÁÆÄÂçï‰∏ªÊú∫Âêç
exclude-simple-hostnames = true

# Experimental
network-framework = false

# DNS Server
dns-server = 223.5.5.5, 114.114.114.114, system
# > ‰ªé /etc/hosts ËØªÂèñ DNS ËÆ∞ÂΩï
read-etc-hosts = true
doh-server = https://doh.pub/dns-query //DNSPod
//doh-server = https://dns.alidns.com/dns-query
# > DOH ËØ∑Ê±ÇÈÄöËøá‰ª£ÁêÜÁ≠ñÁï•ÊâßË°å
doh-follow-outbound-mode = false

# --- ADVANCED ---
# Log Level
loglevel = notify
# ÂΩìÈÅáÂà∞ REJECT Á≠ñÁï•Êó∂ËøîÂõûÈîôËØØÈ°µ
show-error-page-for-reject = true
# Always Real IP Hosts
always-real-ip = link-ip.nextdns.io, msftconnecttest.com, msftncsi.com, *.msftconnecttest.com, *.msftncsi.com, *.srv.nintendo.net, *.stun.playstation.net, xbox.*.microsoft.com, *.xboxlive.com, *.battlenet.com.cn, *.battlenet.com, *.blzstatic.cn, *.battle.net
# Hijack DNS
hijack-dns = 8.8.8.8:53, 8.8.4.4:53
# TCP Force HTTP Hosts
force-http-engine-hosts = *.ott.cibntv.net,123.59.31.1,119.18.193.135,122.14.246.33,175.102.178.52
# VIF Excluded Routes
tun-excluded-routes = 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, 239.255.255.250/32
# VIF Included Routes
tun-included-routes = 192.168.1.12/32
# ÂΩì Wi-Fi ‰∏çÊòØÈ¶ñÈÄâÁΩëÁªúÊó∂ SSID ÁªÑÁ≠ñÁï•‰ΩøÁî®ÈªòËÆ§Á≠ñÁï•
use-default-policy-if-wifi-not-primary = false

[Replica]
# ÊäìÂèñÊµÅÈáè => ËøáÊª§Âô® 1‰∏∫ÂºÄÂêØÔºå0‰∏∫ÂÖ≥Èó≠
# > ÈöêËóè Apple ËØ∑Ê±Ç
hide-apple-request = 1
# > ÈöêËóè Crashlytics ËØ∑Ê±Ç
hide-crash-reporter-request = 1
# > ÈöêËóè UDP ‰ºöËØù
hide-udp = 1
# > ÂÖ≥ÈîÆËØçËøáÊª§Âô®
//noneÔºàÂÖ≥Èó≠ÂÖ≥ÈîÆËØçËøáÊª§Âô®Ôºâ / whitelistÔºà‰ªÖËÆ∞ÂΩïÂåÖÂê´ÂÖ≥ÈîÆÂ≠óÁöÑËØ∑Ê±ÇÔºâ / blacklistÔºà‰ªÖËÆ∞ÂΩï‰∏çÂåÖÂê´ÂÖ≥ÈîÆÂ≠óÁöÑËØ∑Ê±ÇÔºâ / patternÔºàÂåπÈÖçÈÄöÈÖçÁ¨¶ÁöÑËØ∑Ê±ÇÔºâ
keyword-filter-type = blacklist
keyword-filter = icloud, ocsp, logs, analytic, imap, adthor, applovin, appnext, talk, dropbox, github, spys, nexdns, 149.154, 91.108

[Proxy]
# ÂΩìËØ∑Ê±Ç‰∏∫ HTTP ËØ∑Ê±ÇÊó∂ËøîÂõû‰∏Ä‰∏™ÊûÅÂ∞èÁöÑ GIF
REJECT-TINYGIF = reject-tinygif
# ÈòªÊ≠¢ËØ∑Ê±Ç
REJECT = reject
# Áõ¥Êé•ËøûÊé•
DIRECT = direct

[Proxy Group]
# ÁôΩÂêçÂçïÊ®°Âºè PROXYÔºåÈªëÂêçÂçïÊ®°Âºè DIRECT
ùóôùó∂ùóªùóÆùóπ = select, DIRECT, ùóîùó®ùóßùó¢, ùôãùôçùôäùôìùôî ü™Å
# ÂÖ∑‰ΩìÂì™‰∏™Â≠êÁ≠ñÁï•Â∞ÜË¢´‰ΩøÁî®, Ê†πÊçÆ Wi-FI ÁöÑ SSID ÂÜ≥ÂÆö
# ùóõùóºùó∫ùó≤ ‚õ∫Ô∏è = ssid, default = ùôãùôçùôäùôìùôî ü™Å, cellular = ùôãùôçùôäùôìùôî ü™Å, "ssid1" = ùôãùôçùôäùôìùôî ü™Å, "ssid2" = DIRECT
ùóîùó®ùóßùó¢ = url-test, ùôãùôçùôäùôìùôî ü™Å, policy-path=https://sub.store/download/STT, interval=600, tolerance=100, evaluate-before-use=true
ùôãùôçùôäùôìùôî ü™Å = select, DIRECT, policy-path=https://sub.store/download/Media
ùôáùôäùòºùòø-ùòΩùòºùôáùòºùôâùòæùôÄ = load-balance, policy-path=https://sub.store/download/HK, interval=-1, tolerance=100, persistent=true, hidden=true
ùó¨ùóºùòÇùóßùòÇùóØùó≤ = select, ùôãùôçùôäùôìùôî ü™Å, ùôáùôäùòºùòø-ùòΩùòºùôáùòºùôâùòæùôÄ
ùó°ùó≤ùòÅùó≥ùóπùó∂ùòÖ = select, ùôãùôçùôäùôìùôî ü™Å, ùôáùôäùòºùòø-ùòΩùòºùôáùòºùôâùòæùôÄ
ùóßùó≤ùóπùó≤ùó¥ùóøùóÆùó∫ = select, ùôãùôçùôäùôìùôî ü™Å, ùôáùôäùòºùòø-ùòΩùòºùôáùòºùôâùòæùôÄ
ùóîùóΩùóΩùóπùó≤ = select, DIRECT, ùôãùôçùôäùôìùôî ü™Å
ùóîùó±ùóØùóπùóºùó∞ùó∏ = select, REJECT, DIRECT, REJECT-TINYGIF

[Rule]
# Client For macOS
# > Proxy
PROCESS-NAME,v2ray,DIRECT
PROCESS-NAME,ss-local,DIRECT
PROCESS-NAME,UUBooster,DIRECT
# > Download
PROCESS-NAME,aria2c,DIRECT
PROCESS-NAME,fdm,DIRECT
PROCESS-NAME,Folx,DIRECT
PROCESS-NAME,NetTransport,DIRECT
PROCESS-NAME,Thunder,DIRECT
PROCESS-NAME,Transmission,DIRECT
PROCESS-NAME,uTorrent,DIRECT
PROCESS-NAME,WebTorrent,DIRECT
PROCESS-NAME,WebTorrent Helper,DIRECT

# CUSTOM RULES
# > External Resources Update
AND,((DOMAIN,raw.githubusercontent.com), (USER-AGENT,Surge/*)),ùóôùó∂ùóªùóÆùóπ,notification-text="‚ôªÔ∏èExternal Resources Update",notification-interval=3600

# RULE-SET
# > Unbreak
RULE-SET,https://blankmagic.github.io/surge/rule/Unbreak.list,DIRECT
# > Advertising
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Guard/Advertising.list,ùóîùó±ùóØùóπùóºùó∞ùó∏
# > Hijacking
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Guard/Hijacking.list,ùóîùó±ùóØùóπùóºùó∞ùó∏
# > Youtube, Netflix
RULE-SET,https://blankmagic.github.io/surge/rule/media/YouTube.list,ùó¨ùóºùòÇùóßùòÇùóØùó≤
RULE-SET,https://blankmagic.github.io/surge/rule/media/Netflix.list,ùó°ùó≤ùòÅùó≥ùóπùó∂ùòÖ
# > GlobalMedia Services
RULE-SET,https://blankmagic.github.io/surge/rule/GlobalMedia.list,ùôãùôçùôäùôìùôî ü™Å
# > Telegram
RULE-SET,https://blankmagic.github.io/surge/rule/Telegram.list,ùóßùó≤ùóπùó≤ùó¥ùóøùóÆùó∫
# > Apple Services
RULE-SET,https://blankmagic.github.io/surge/rule/apple/Apple.list,ùóîùóΩùóΩùóπùó≤
# > Global
RULE-SET,https://blankmagic.github.io/surge/rule/Global.list,ùôãùôçùôäùôìùôî ü™Å
# > Domestic
RULE-SET,https://blankmagic.github.io/surge/rule/Domestic.list,DIRECT

IP-CIDR,0.0.0.0/32,REJECT,no-resolve

# Local Area Network
RULE-SET,LAN,DIRECT

# GeoIP China
GEOIP,CN,DIRECT

FINAL,ùóôùó∂ùóªùóÆùóπ,dns-failed

[Host]
# Firebase Cloud Messaging
mtalk.google.com = 108.177.125.188
# Google Dl
dl.google.com = server:119.29.29.29
dl.l.google.com = server:119.29.29.29
# CUSTOM HOST

[URL Rewrite]
# Redirect Google Search Service
^(http|https):\/\/(www.)?(g|google)\.cn https://www.google.com 302

# Redirect Google Maps Service
^(http|https):\/\/(ditu|maps).google\.cn https://maps.google.com 302

# AbeamTV - api.abema.io
^(http|https):\/\/api\.abema\.io\/v\d\/ip\/check - reject
# CUSTOM URL

[Header Rewrite] 
^https?:\/\/.*\.baidu\.com header-replace User-Agent "Mozilla/5.0 (iPhone; CPU iPhone OS 13_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/14.0.3 Mobile/15E148 Safari/16C50 Quark/604.1 T7/10.3 SearchCraft/2.6.3 (Baidu; P1 8.0.0)"

^https?:\/\/.*\.zhihu\.com\/question header-replace User-Agent "osee2unifiedRelease/4432 osee2unifiedReleaseVersion/7.8.0 Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148"

[SSID Setting]
# Temporarily Suspend
"CUSTOM SSID" suspend=true

[Script]

[MITM]
skip-server-cert-verify = true
hostname = www.google.cn, api.abema.io, *.baidu.com, *.zhihu.com, -CUSTOMMitM
